#!/bin/bash
__dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
# shellcheck source=../env/db.env
source "${__dir}/../env/db.env"
if [ -t 0 ]; then
  # Need tty to run mysql shell
  "${__dir}/cli" mysql -h"${MYSQL_HOST}" -u"${MYSQL_USER}" -p"${MYSQL_PASSWORD}" "${MYSQL_DATABASE}" "$@"
else
  # Read from stdin, ex: bin/mysql < dbdump.sql
  "${__dir}/clinotty" mysql -h"${MYSQL_HOST}" -u"${MYSQL_USER}" -p"${MYSQL_PASSWORD}" "${MYSQL_DATABASE}" "$@"
fi
